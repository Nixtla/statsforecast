---
output-file: mfles.html
title: MFLES model
---

### `MFLES`

```python
MFLES(verbose=1, robust=None)
```

#### `MFLES.aic`

```python
aic = None
```

#### `MFLES.const`

```python
const = None
```

#### `MFLES.exogenous_models`

```python
exogenous_models = None
```

#### `MFLES.fit`

```python
fit(
    y,
    seasonal_period=None,
    X=None,
    fourier_order=None,
    ma=None,
    alpha=1.0,
    decay=-1,
    n_changepoints=0.25,
    seasonal_lr=0.9,
    rs_lr=1,
    exogenous_lr=1,
    exogenous_estimator=OLS,
    exogenous_params={},
    linear_lr=0.9,
    cov_threshold=0.7,
    moving_medians=False,
    max_rounds=50,
    min_alpha=0.05,
    max_alpha=1.0,
    round_penalty=0.0001,
    trend_penalty=True,
    multiplicative=None,
    changepoints=True,
    smoother=False,
    seasonality_weights=False,
)
```

Fit the MFLES model.

**Parameters:**

Name | Type | Description | Default
---- | ---- | ----------- | -------
`y` | <code>[array](#numpy.array)</code> | The time series as a numpy array. | *required*
`seasonal_period` | <code>[int](#int)</code> | Seasonal period. Defaults to None. | <code>None</code>
`X` | <code>[array](#numpy.array)</code> | Exogenous variables. Defaults to None. | <code>None</code>
`fourier_order` | <code>[int](#int)</code> | How many fourier sin/cos pairs to create, the larger the number the more complex of a seasonal pattern can be fitted. A lower number leads to smoother results. This is auto-set based on seasonal_period. Defaults to None. | <code>None</code>
`ma` | <code>[int](#int)</code> | The moving average order to use, this is auto-set based on internal logic. Passing 4 would fit a 4 period moving average on the residual component. Defaults to None. | <code>None</code>
`alpha` | <code>[float](#float)</code> | The alpha which is used in fitting the underlying LASSO when using piecewise functions. Defaults to 1.0. | <code>1.0</code>
`decay` | <code>[float](#float)</code> | Effects the slopes of the piecewise-linear basis function. Defaults to -1. | <code>-1</code>
`n_changepoints` | <code>[float](#float)</code> | The number of changepoint knots to place, a default of .25 with place .25 * series length number of knots. Defaults to 0.25. | <code>0.25</code>
`seasonal_lr` | <code>[float](#float)</code> | A shrinkage parameter (0 < seasonal_lr \\<= 1) which penalizes the seasonal fit, a .9 will flatly multiply the seasonal fit by .9 each boosting round, this can be used to allow more signal to the exogenous component. Defaults to 0.9. | <code>0.9</code>
`rs_lr` | <code>[float](#float)</code> | A shrinkage parameter (0 < rs_lr \\<= 1) which penalizes the residual smoothing, a .9 will flatly multiply the residual fit by .9 each boosting round, this can be used to allow more signal to the seasonality or linear components. Defaults to 1. | <code>1</code>
`exogenous_lr` | <code>[float](#float)</code> | Shrinkage parameter for exogenous variables. Defaults to 1. | <code>1</code>
`exogenous_estimator` | <code>class</code> | Estimator class for exogenous variables. Defaults to OLS. | <code>[OLS](#statsforecast.mfles.OLS)</code>
`exogenous_params` | <code>[dict](#dict)</code> | Parameters for exogenous estimator. Defaults to {}. | <code>{}</code>
`linear_lr` | <code>[float](#float)</code> | A shrinkage parameter (0 < linear_lr \\<= 1) which penalizes the linear trend fit, a .9 will flatly multiply the linear fit by .9 each boosting round, this can be used to allow more signal to the seasonality or exogenous components. Defaults to 0.9. | <code>0.9</code>
`cov_threshold` | <code>[float](#float)</code> | The deseasonalized cov is used to auto-set some logic, lowering the cov_threshold will result in simpler and less complex residual smoothing. If you pass something like 1000 then there will be no safeguards applied. Defaults to 0.7. | <code>0.7</code>
`moving_medians` | <code>[bool](#bool)</code> | The default behavior is to fit an initial median to the time series, if you pass True to moving_medians then it will fit a median per seasonal period. Defaults to False. | <code>False</code>
`max_rounds` | <code>[int](#int)</code> | The max number of boosting rounds. The boosting will auto-stop but depending on other parameters such as rs_lr you may want more rounds. Generally, the more rounds => the more smooth your fit. Defaults to 50. | <code>50</code>
`min_alpha` | <code>[float](#float)</code> | The min alpha in the SES ensemble. Defaults to 0.05. | <code>0.05</code>
`max_alpha` | <code>[float](#float)</code> | The max alpha used in the SES ensemble. Defaults to 1.0. | <code>1.0</code>
`round_penalty` | <code>[float](#float)</code> | Round penalty parameter. Defaults to 0.0001. | <code>0.0001</code>
`trend_penalty` | <code>[bool](#bool)</code> | Whether to apply a simple penalty to the lienar trend component, very useful for dealing with the potentially dangerous piecewise trend. Defaults to True. | <code>True</code>
`multiplicative` | <code>[bool](#bool)</code> | Auto-set based on internal logic, but if given True it will simply take the log of the time series. Defaults to None. | <code>None</code>
`changepoints` | <code>[bool](#bool)</code> | Whether to fit for changepoints if all other logic allows for it, by setting False then MFLES will not ever fit a piecewise trend. Defaults to True. | <code>True</code>
`smoother` | <code>[bool](#bool)</code> | If True then a simple exponential ensemble will be used rather than auto settings. Defaults to False. | <code>False</code>
`seasonality_weights` | <code>[bool](#bool)</code> | Whether to use seasonality weights. Defaults to False. | <code>False</code>

**Returns:**

Type | Description
---- | -----------
| np.array: Fitted values.

#### `MFLES.lower`

```python
lower = None
```

#### `MFLES.optimize`

```python
optimize(
    y,
    test_size,
    n_steps,
    step_size=1,
    seasonal_period=None,
    metric="smape",
    X=None,
    params=None,
)
```

Optimization method for MFLES.

**Parameters:**

Name | Type | Description | Default
---- | ---- | ----------- | -------
`y` | <code>[array](#numpy.array)</code> | Your time series as a numpy array. | *required*
`test_size` | <code>[int](#int)</code> | Length of the test set to hold out to calculate test error. | *required*
`n_steps` | <code>[int](#int)</code> | Number of train and test sets to create. | *required*
`step_size` | <code>[int](#int)</code> | How many periods to move after each step. Defaults to 1. | <code>1</code>
`seasonal_period` | <code>[int](#int) or [list](#list)</code> | The seasonal period to calculate for. Defaults to None. | <code>None</code>
`metric` | <code>[str](#str)</code> | Supported metrics are smape, mape, mse, mae. Defaults to 'smape'. | <code>'smape'</code>
`X` | <code>[array](#numpy.array)</code> | Exogenous variables. Defaults to None. | <code>None</code>
`params` | <code>[dict](#dict)</code> | A user provided dictionary of params to try. Defaults to None. | <code>None</code>

**Returns:**

Name | Type | Description
---- | ---- | -----------
`dict` | | Optimal parameters configuration.

#### `MFLES.penalty`

```python
penalty = None
```

#### `MFLES.predict`

```python
predict(forecast_horizon, X=None)
```

#### `MFLES.predicted`

```python
predicted = None
```

#### `MFLES.robust`

```python
robust = robust
```

#### `MFLES.seasonal_decompose`

```python
seasonal_decompose(y, **kwargs)
```

#### `MFLES.seasonality`

```python
seasonality = None
```

#### `MFLES.trend`

```python
trend = None
```

#### `MFLES.upper`

```python
upper = None
```

#### `MFLES.verbose`

```python
verbose = verbose
```
