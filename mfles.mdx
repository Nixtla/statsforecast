



# <kbd>module</kbd> `statsforecast.mfles`





---



## <kbd>function</kbd> `calc_mse`

```python
calc_mse(y_true, y_pred)
```






---



## <kbd>function</kbd> `calc_mae`

```python
calc_mae(y_true, y_pred)
```






---



## <kbd>function</kbd> `calc_mape`

```python
calc_mape(y_true, y_pred)
```






---



## <kbd>function</kbd> `calc_smape`

```python
calc_smape(y_true, y_pred)
```






---



## <kbd>function</kbd> `cross_validation`

```python
cross_validation(
    y,
    X,
    test_size,
    n_splits,
    model_obj,
    metric,
    step_size=1,
    **kwargs
)
```






---



## <kbd>function</kbd> `logic_check`

```python
logic_check(keys_to_check, keys)
```






---



## <kbd>function</kbd> `logic_layer`

```python
logic_layer(param_dict)
```






---



## <kbd>function</kbd> `default_configs`

```python
default_configs(seasonal_period, configs=None)
```






---



## <kbd>function</kbd> `cap_outliers`

```python
cap_outliers(series, outlier_cap=3)
```






---



## <kbd>function</kbd> `set_fourier`

```python
set_fourier(period)
```






---



## <kbd>function</kbd> `calc_trend_strength`

```python
calc_trend_strength(resids, deseasonalized)
```






---



## <kbd>function</kbd> `calc_seas_strength`

```python
calc_seas_strength(resids, detrended)
```






---



## <kbd>function</kbd> `calc_rsq`

```python
calc_rsq(y, fitted)
```






---



## <kbd>function</kbd> `calc_cov`

```python
calc_cov(y, mult=1)
```






---



## <kbd>function</kbd> `get_seasonality_weights`

```python
get_seasonality_weights(y, seasonal_period)
```






---



## <kbd>function</kbd> `get_fourier_series`

```python
get_fourier_series(length, seasonal_period, fourier_order)
```






---



## <kbd>function</kbd> `get_future_basis`

```python
get_future_basis(basis_functions, forecast_horizon)
```






---



## <kbd>function</kbd> `lasso_nb`

```python
lasso_nb(X, y, alpha, tol=0.001, maxiter=10000)
```






---



## <kbd>function</kbd> `ses_ensemble`

```python
ses_ensemble(y, min_alpha=0.05, max_alpha=1.0, smooth=False, order=1)
```






---



## <kbd>function</kbd> `fast_ols`

```python
fast_ols(x, y)
```

Simple OLS for two data sets. 


---



## <kbd>function</kbd> `median`

```python
median(y, seasonal_period)
```






---



## <kbd>function</kbd> `ols`

```python
ols(X, y)
```






---



## <kbd>function</kbd> `wls`

```python
wls(X, y, weights)
```






---



## <kbd>class</kbd> `OLS`







---



### <kbd>method</kbd> `fit`

```python
fit(X, y)
```





---



### <kbd>method</kbd> `predict`

```python
predict(X)
```






---



## <kbd>class</kbd> `Zeros`







---



### <kbd>method</kbd> `predict`

```python
predict(X)
```






---



## <kbd>class</kbd> `MFLES`






### <kbd>method</kbd> `__init__`

```python
__init__(verbose=1, robust=None)
```








---



### <kbd>method</kbd> `fit`

```python
fit(
    y,
    seasonal_period=None,
    X=None,
    fourier_order=None,
    ma=None,
    alpha=1.0,
    decay=-1,
    n_changepoints=0.25,
    seasonal_lr=0.9,
    rs_lr=1,
    exogenous_lr=1,
    exogenous_estimator=<class 'statsforecast.mfles.OLS'>,
    exogenous_params={},
    linear_lr=0.9,
    cov_threshold=0.7,
    moving_medians=False,
    max_rounds=50,
    min_alpha=0.05,
    max_alpha=1.0,
    round_penalty=0.0001,
    trend_penalty=True,
    multiplicative=None,
    changepoints=True,
    smoother=False,
    seasonality_weights=False
)
```

Fit the MFLES model. 



**Args:**
 
 - <b>`y`</b> (np.array):  The time series as a numpy array. 
 - <b>`seasonal_period`</b> (int, optional):  Seasonal period. Defaults to None. 
 - <b>`X`</b> (np.array, optional):  Exogenous variables. Defaults to None. 
 - <b>`fourier_order`</b> (int, optional):  How many fourier sin/cos pairs to create, the larger the number the more complex of a seasonal pattern can be fitted. A lower number leads to smoother results. This is auto-set based on seasonal_period. Defaults to None. 
 - <b>`ma`</b> (int, optional):  The moving average order to use, this is auto-set based on internal logic. Passing 4 would fit a 4 period moving average on the residual component. Defaults to None. 
 - <b>`alpha`</b> (float, optional):  The alpha which is used in fitting the underlying LASSO when using piecewise functions. Defaults to 1.0. 
 - <b>`decay`</b> (float, optional):  Effects the slopes of the piecewise-linear basis function. Defaults to -1. 
 - <b>`n_changepoints`</b> (float, optional):  The number of changepoint knots to place, a default of .25 with place .25 * series length number of knots. Defaults to 0.25. 
 - <b>`seasonal_lr`</b> (float, optional):  A shrinkage parameter (0 < seasonal_lr \<= 1) which penalizes the seasonal fit, a .9 will flatly multiply the seasonal fit by .9 each boosting round, this can be used to allow more signal to the exogenous component. Defaults to 0.9. 
 - <b>`rs_lr`</b> (float, optional):  A shrinkage parameter (0 < rs_lr \<= 1) which penalizes the residual smoothing, a .9 will flatly multiply the residual fit by .9 each boosting round, this can be used to allow more signal to the seasonality or linear components. Defaults to 1. 
 - <b>`exogenous_lr`</b> (float, optional):  Shrinkage parameter for exogenous variables. Defaults to 1. 
 - <b>`exogenous_estimator`</b> (class, optional):  Estimator class for exogenous variables. Defaults to OLS. 
 - <b>`exogenous_params`</b> (dict, optional):  Parameters for exogenous estimator. Defaults to {}. 
 - <b>`linear_lr`</b> (float, optional):  A shrinkage parameter (0 < linear_lr \<= 1) which penalizes the linear trend fit, a .9 will flatly multiply the linear fit by .9 each boosting round, this can be used to allow more signal to the seasonality or exogenous components. Defaults to 0.9. 
 - <b>`cov_threshold`</b> (float, optional):  The deseasonalized cov is used to auto-set some logic, lowering the cov_threshold will result in simpler and less complex residual smoothing. If you pass something like 1000 then there will be no safeguards applied. Defaults to 0.7. 
 - <b>`moving_medians`</b> (bool, optional):  The default behavior is to fit an initial median to the time series, if you pass True to moving_medians then it will fit a median per seasonal period. Defaults to False. 
 - <b>`max_rounds`</b> (int, optional):  The max number of boosting rounds. The boosting will auto-stop but depending on other parameters such as rs_lr you may want more rounds. Generally, the more rounds => the more smooth your fit. Defaults to 50. 
 - <b>`min_alpha`</b> (float, optional):  The min alpha in the SES ensemble. Defaults to 0.05. 
 - <b>`max_alpha`</b> (float, optional):  The max alpha used in the SES ensemble. Defaults to 1.0. 
 - <b>`round_penalty`</b> (float, optional):  Round penalty parameter. Defaults to 0.0001. 
 - <b>`trend_penalty`</b> (bool, optional):  Whether to apply a simple penalty to the lienar trend component, very useful for dealing with the potentially dangerous piecewise trend. Defaults to True. 
 - <b>`multiplicative`</b> (bool, optional):  Auto-set based on internal logic, but if given True it will simply take the log of the time series. Defaults to None. 
 - <b>`changepoints`</b> (bool, optional):  Whether to fit for changepoints if all other logic allows for it, by setting False then MFLES will not ever fit a piecewise trend. Defaults to True. 
 - <b>`smoother`</b> (bool, optional):  If True then a simple exponential ensemble will be used rather than auto settings. Defaults to False. 
 - <b>`seasonality_weights`</b> (bool, optional):  Whether to use seasonality weights. Defaults to False. 



**Returns:**
 
 - <b>`np.array`</b>:  Fitted values. 

---



### <kbd>method</kbd> `optimize`

```python
optimize(
    y,
    test_size,
    n_steps,
    step_size=1,
    seasonal_period=None,
    metric='smape',
    X=None,
    params=None
)
```

Optimization method for MFLES. 



**Args:**
 
 - <b>`y`</b> (np.array):  Your time series as a numpy array. 
 - <b>`test_size`</b> (int):  Length of the test set to hold out to calculate test error. 
 - <b>`n_steps`</b> (int):  Number of train and test sets to create. 
 - <b>`step_size`</b> (int, optional):  How many periods to move after each step. Defaults to 1. 
 - <b>`seasonal_period`</b> (int or list, optional):  The seasonal period to calculate for. Defaults to None. 
 - <b>`metric`</b> (str, optional):  Supported metrics are smape, mape, mse, mae. Defaults to 'smape'. 
 - <b>`X`</b> (np.array, optional):  Exogenous variables. Defaults to None. 
 - <b>`params`</b> (dict, optional):  A user provided dictionary of params to try. Defaults to None. 



**Returns:**
 
 - <b>`dict`</b>:  Optimal parameters configuration. 

---



### <kbd>method</kbd> `predict`

```python
predict(forecast_horizon, X=None)
```





---



### <kbd>method</kbd> `seasonal_decompose`

```python
seasonal_decompose(y, **kwargs)
```






